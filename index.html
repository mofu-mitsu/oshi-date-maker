<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- メタタグ・OGP設定 -->
    <title>推しとおでかけプランメーカー</title>
    <meta name="description" content="推しとの理想のデートプランを自動生成♡あなただけの胸キュンな1日を作ろう！">
    
    <meta property="og:title" content="推しとおでかけプランメーカー">
    <meta property="og:description" content="推しとの理想のデートプランを自動生成♡あなただけの胸キュンな1日を作ろう！">
    <meta property="og:type" content="website">
    <!-- ↓ URLは自分のものに変えてね -->
    <meta property="og:url" content="https://mofu-mitsu.github.io/oshi-date-maker/">
    <!-- ↓ OGP画像ができたらここを変えてね -->
    <meta property="og:image" content="https://mofu-mitsu.github.io/oshi-date-maker/ogp.png">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- ファビコン -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>✈️</text></svg>">

    <!-- ライブラリ読み込み -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- フォント：手書き風「Yomogi」を使用 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Yomogi&family=Zen+Maru+Gothic:wght@500;700&display=swap');

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #f0f8ff; /* 薄い空色 */
            background-image: 
                linear-gradient(90deg, rgba(255,255,255,0.5) 50%, transparent 50%),
                linear-gradient(rgba(255,255,255,0.5) 50%, transparent 50%);
            background-size: 40px 40px; /* 方眼紙っぽい背景 */
            color: #555;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 10px;
            margin: 0;
            overflow-x: hidden;
        }

        h1 {
            color: #5d9bc8;
            font-family: 'Yomogi', cursive;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 5px;
            background: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 3px 3px 0 #bae6fd;
            border: 2px solid #5d9bc8;
            transform: rotate(-2deg); /* ちょっと傾けて手作り感 */
        }

        .subtitle {
            font-family: 'Yomogi', cursive;
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 25px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            align-items: flex-start;
            max-width: 900px;
            width: 100%;
        }

        /* --- 入力エリア --- */
        .editor {
            flex: 1;
            min-width: 280px;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 10px solid #a5d8ff; /* 上部にテープ風の色 */
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #5d9bc8;
            font-family: 'Yomogi', cursive;
            font-size: 1.1rem;
        }

        input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1rem;
            box-sizing: border-box;
            background: #fafafa;
        }
        
        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #a5d8ff;
            background: #fff;
        }

        button.generate-btn {
            width: 100%;
            padding: 15px;
            background: #8ec5fc;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #5d9bc8;
            transition: transform 0.1s;
            margin-top: 10px;
        }
        
        button.generate-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #5d9bc8;
        }

        /* --- 結果カードエリア（スクラップブック風） --- */
        .preview-area {
            flex: 1;
            min-width: 320px;
            display: flex;
            justify-content: center;
        }

        #date-card {
            width: 320px;
            /* ノートの紙っぽいテクスチャ */
            background: #fff; 
            background-image: repeating-linear-gradient(#fff 0px, #fff 24px, #e0f2fe 25px);
            padding: 20px 20px 40px; /* 下を長めに */
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            box-sizing: border-box;
            font-family: 'Yomogi', cursive;
            color: #444;
            /* リングノート風の穴 */
            border-left: 10px solid #f0f8ff; 
        }

        /* マスキングテープ装飾 */
        #date-card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(1deg);
            width: 120px;
            height: 25px;
            background: rgba(255, 200, 220, 0.6); /* ピンクのマステ */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }

        #date-card::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: -10px;
            width: 80px;
            height: 20px;
            background: rgba(160, 230, 180, 0.6); /* 緑のマステ */
            transform: rotate(-15deg);
            z-index: 10;
        }

        .date-header {
            text-align: center;
            margin-top: 10px;
            margin-bottom: 20px;
            border-bottom: 2px dashed #aaa;
            padding-bottom: 10px;
        }

        .oshi-name-display {
            font-size: 1.4rem;
            color: #5d9bc8;
            font-weight: bold;
        }
        
        .plan-title {
            font-size: 1.1rem;
            margin: 10px 0;
            background: #e0f7fa;
            display: inline-block;
            padding: 2px 10px;
            border-radius: 10px;
            transform: rotate(-1deg);
        }

        /* スケジュールリスト */
        .schedule-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }

        .schedule-item {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }

        .time {
            background: #5d9bc8;
            color: white;
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            margin-right: 10px;
            white-space: nowrap;
        }

        .action {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* 推しのセリフ */
        .highlight-box {
            margin-top: 25px;
            background: #fff8e1; /* 薄い黄色 */
            padding: 15px;
            border-radius: 10px;
            position: relative;
            border: 2px solid #ffe082;
            transform: rotate(1deg);
        }

        .highlight-box::before {
            content: '♡';
            position: absolute;
            top: -12px;
            right: -5px;
            font-size: 1.5rem;
            color: #ff8ba7;
        }

        .highlight-text {
            color: #d81b60;
            font-weight: bold;
            font-size: 1rem;
        }

        .watermark {
            margin-top: 25px;
            text-align: right;
            font-size: 0.7rem;
            color: #aaa;
        }

        /* --- ボタンエリア --- */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
            justify-content: center;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Zen Maru Gothic', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        #btn-save { background: #ffb7c5; color: white; }
        #btn-share { background: #444; color: white; }

        /* --- フッター --- */
        .footer-content {
            margin-top: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .backtop a {
            color: #5d9bc8;
            text-decoration: none;
            font-weight: bold;
            font-family: 'Zen Maru Gothic', sans-serif;
            padding: 10px 20px;
            border-radius: 20px;
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #longpressSaveArea {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 600px) {
            .container { flex-direction: column; align-items: center;}
            .editor, .preview-area { width: 100%; max-width: 320px; }
            #date-card { width: 100%; }
        }
    </style>
</head>
<body>

    <h1>✈️ 推しとおでかけプランメーカー</h1>
    <p class="subtitle">推しとの理想のデートプランを提案するよ♡</p>

    <div class="container">
        <!-- 入力フォーム -->
        <div class="editor">
            <div class="input-group">
                <label>📛 推しの名前</label>
                <input type="text" id="input-name" placeholder="例：みりんてゃ">
            </div>

            <div class="input-group">
                <label>🎢 デートの気分</label>
                <select id="input-vibe">
                    <option value="random">おまかせ！</option>
                    <option value="romantic">ロマンチックに♡</option>
                    <option value="active">元気に遊ぶ！</option>
                    <option value="chill">まったりおうち/カフェ</option>
                    <option value="shopping">お買い物＆食べ歩き</option>
                </select>
            </div>

            <button class="generate-btn" onclick="generatePlan()">💘 プランを作成！</button>
            
            <div class="action-buttons">
                <button id="btn-save" class="action-btn"><i class="fa-solid fa-camera"></i> 保存</button>
                <button id="btn-share" class="action-btn"><i class="fa-solid fa-share-nodes"></i> 共有</button>
            </div>
        </div>

        <!-- 結果表示（手帳風） -->
        <div class="preview-area">
            <div id="date-card">
                <div class="date-header">
                    <div style="font-size:0.8rem; color:#888;">DATE PLAN with</div>
                    <div class="oshi-name-display" id="card-name">推しの名前</div>
                </div>

                <div style="text-align:center;">
                    <span class="plan-title" id="card-title">✨ 理想のデートプラン ✨</span>
                </div>

                <ul class="schedule-list" id="schedule-list">
                    <!-- ここにJSでプランが生成されます -->
                    <li class="schedule-item">
                        <span class="time">10:00</span>
                        <span class="action">ここにプランが表示されるよ！<br>名前を入れてボタンを押してね。</span>
                    </li>
                </ul>

                <div class="highlight-box">
                    <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">Today's Highlight</div>
                    <div class="highlight-text" id="card-quote">「どんなデートになるか楽しみだね！」</div>
                </div>

                <div class="watermark">#推しとデートメーカー</div>
            </div>
        </div>
    </div>

    <!-- スマホ用長押し保存エリア -->
    <div id="longpressSaveArea"></div>

    <!-- フッター -->
    <div class="footer-content">
        <!-- 楽天アフィ -->
        <div class="rakuten">
            <a href="https://hb.afl.rakuten.co.jp/hsc/4e9240a2.33577567.3d95c766.8a7897b5/?link_type=pict&ut=eyJwYWdlIjoic2hvcCIsInR5cGUiOiJwaWN0IiwiY29sIjoxLCJjYXQiOiI4NSIsImJhbiI6NDc4OTczLCJhbXAiOmZhbHNlfQ%3D%3D" target="_blank" rel="nofollow sponsored noopener" style="word-wrap:break-word;">
                <img src="https://hbb.afl.rakuten.co.jp/hsb/4e9240a2.33577567.3d95c766.8a7897b5/?me_id=1&me_adv_id=478973&t=pict" border="0" style="margin:2px; max-width:100%; height:auto; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.05);" alt="" title="">
            </a>
        </div>

        <!-- TOPへ戻る -->
        <div class="backtop">
            <a href="https://mofu-mitsu.github.io/">
                <i class="fa-solid fa-house"></i> もふみつ工房 TOPへ戻る
            </a>
        </div>
    </div>

    <script>
        // デートプランのデータベース（1つのカテゴリに複数のプランを用意したよ！）
        const scenarios = {
            romantic: [
                {
                    title: "夜景とときめきディナー🌃",
                    steps: [
                        { time: "17:00", text: "待ち合わせ場所で、いつもよりおめかしした{name}と合流。" },
                        { time: "18:00", text: "夜景の見えるレストランでディナー。「これ、美味しいね」と微笑み合う。" },
                        { time: "20:00", text: "きらきら光るイルミネーションの中を、手を繋いで散歩。" },
                        { quote: "「帰りたくないな…もう少しだけ、一緒にいてくれる？」" }
                    ]
                },
                {
                    title: "雨音と寄り添うカフェデート☔",
                    steps: [
                        { time: "14:00", text: "小雨の降る駅前で{name}と合流。「来てくれてありがとな/な」と少し照れた顔。" },
                        { time: "14:30", text: "窓際席のあるカフェへ。雨粒を眺めながら、温かいドリンクを片手にゆっくりおしゃべり。" },
                        { time: "16:00", text: "雨音に包まれた静かな空間で、テーブルの下でそっと指先が触れ合う。" },
                        { quote: "「外、どれだけ降っててもさ…お前/君が隣にいれば、今日はいい日だわ。」" }
                    ]
                },
                {
                    title: "星空の下で語る夜🌌",
                    steps: [
                        { time: "19:00", text: "少し街から離れた公園で{name}と待ち合わせ。夜風が心地よくて、二人で並んで歩き出す。" },
                        { time: "19:30", text: "芝生にレジャーシートを敷いて座り、持ってきた飲み物を分け合いながら空を見上げる。" },
                        { time: "20:30", text: "星座アプリで星を探しながら、将来の話や、普段は言えない本音をぽつりぽつりと打ち明け合う。" },
                        { quote: "「もし迷ってもさ、お前/君のことだけは見失わない自信ある。」" }
                    ]
                },
                {
                    title: "映画館で共有するドキドキ🎬",
                    steps: [
                        { time: "15:00", text: "映画館ロビーで{name}と合流。ポップコーンのフレーバーをどれにするか二人で真剣に悩む。" },
                        { time: "15:30", text: "暗い劇場内、何気なく置かれた{name}の手が近くて、意識してしまい心臓が早くなる。" },
                        { time: "17:30", text: "上映後、余韻の残るロビーで感想を言い合いながら、さっきより少し近い距離で歩く。" },
                        { quote: "「さっきのシーン、お前/君も泣いてたよね。…バレてるからね？」" }
                    ]
                },
                {
                    title: "観覧車で閉じ込められた二人🎡",
                    steps: [
                        { time: "18:00", text: "遊園地の観覧車前で{name}と合流。少し照れながらも、並んでチケットを買う。" },
                        { time: "18:15", text: "二人きりのゴンドラがゆっくりと空へ。街並みがミニチュアみたいに小さくなっていく。" },
                        { time: "18:25", text: "頂上付近で、ふと沈黙が訪れる。小さな空間に鼓動の音だけが響いている気がして、どちらからともなく目が合う。" },
                        { quote: "「…こういうの、ずるいよな。お前/君のこと、もっと好きになる。」" }
                    ]
                },
                {
                    title: "幻想的な水族館デート🐬",
                    steps: [
                        { time: "13:00", text: "水族館前で待ち合わせ。{name}はもうチケットを買って待っててくれた。" },
                        { time: "14:00", text: "クラゲコーナーの薄暗い照明の中、二人の距離が自然と縮まる。" },
                        { time: "16:00", text: "イルカショーで水しぶきを浴びて、二人で顔を見合わせて大笑い。" },
                        { quote: "「はぐれないように、俺/私の裾、掴んでていいよ。」" }
                    ]
                },
                {
                    title: "星空プラネタリウムデート💫",
                    steps: [
                        { time: "18:00", text: "仕事/学校帰りに待ち合わせして、プラネタリウムへ直行。" },
                        { time: "19:00", text: "満天の星空を見上げながら、暗闇でそっと手が触れ合う。" },
                        { time: "20:30", text: "感想を語り合いながら、夜風に吹かれて駅まで歩く。" },
                        { quote: "「あの星みたいにさ、ずっと隣にいられたらいいのにね。」" }
                    ]
                },
                {
                    title: "海辺の夕日ドライブ🚗",
                    steps: [
                        { time: "14:00", text: "{name}の運転で海へドライブ。「好きな曲かけていいよ」とスマホを渡される。" },
                        { time: "16:00", text: "海辺を散歩。波打ち際ではしゃぐ{name}の写真をこっそり撮る。" },
                        { time: "18:00", text: "水平線に沈む夕日を二人で眺める。沈黙さえも心地いい。" },
                        { quote: "「…来年も、この景色を隣で見たいな。」" }
                    ]
                },
                {
                    title: "星空とぬくもりナイトデート🌙✨",
                    steps: [
                        { time: "18:00", text: "駅で{name}と合流。手には温かいホットドリンクが2つ。「寒いと思って…」と渡してくれる。" },
                        { time: "19:00", text: "郊外の小高い丘に移動。街の光が小さく見える場所で、レジャーシートを広げる。" },
                        { time: "20:00", text: "静かな夜空の下、流れ星を探しながら寄り添って座る。" },
                        { quote: "「ほら…もっと近く来て。寒くない？」" }
                    ]
                },
                {
                    title: "レトロ喫茶でしっとり午後デート📖☕️",
                    steps: [
                        { time: "14:00", text: "{name}が選んだレトロ喫茶で合流。ステンドグラスから差し込む光が美しい。" },
                        { time: "15:00", text: "クリームソーダを仲良くシェア。「そっちの味も一口ちょうだい？」" },
                        { time: "16:00", text: "静かな店内で肩が触れそうな距離。自然と小声で話したくなる空気。" },
                        { quote: "「君といる時間って、なんか特別だよね。」" }
                    ]
                },
                {
                    title: "夜の観覧車ロマンデート🎡💓",
                    steps: [
                        { time: "18:00", text: "遊園地で{name}と合流。ほんのり照れた笑顔がかわいい。" },
                        { time: "19:00", text: "夜景が広がる観覧車へ。二人きりの密室空間にドキドキ。" },
                        { time: "19:10", text: "頂上に近づくほど、街の光が宝石みたいに輝く。" },
                        { quote: "「願いごと、ひとつだけ。…これからも隣にいて？」" }
                    ]
                },
                {
                    title: "憧れのホテルラウンジ🍸",
                    steps: [
                        { time: "15:00", text: "高級ホテルのラウンジでアフタヌーンティー。少し背伸びしたデート。" },
                        { time: "16:00", text: "「どれから食べる？」と楽しそうに迷う{name}が可愛すぎる。" },
                        { time: "18:00", text: "ピアノの生演奏を聴きながら、普段は言えない感謝を伝え合う。" },
                        { quote: "「お前/君といると、どんな高い宝石よりドキドキするよ。」" }
                    ]
                },
                {
                    title: "星空映画館デート✨",
                    steps: [
                        { time: "19:30", text: "屋上プラネタリウムで待ち合わせ。{name}が温かい飲み物を持ってきてくれた。" },
                        { time: "20:00", text: "星空の下、二人だけの特等席でロマンチック映画鑑賞。" },
                        { time: "22:30", text: "映画の余韻に浸りながら、屋上で星を眺める。" },
                        { quote: "「今日みたいな日は、ずっと覚えてたいな。」" }
                    ]
                },
                {
                    title: "夕暮れ遊園地デート🎡",
                    steps: [
                        { time: "16:00", text: "夕方の遊園地で待ち合わせ。{name}が「一緒に乗りたい！」と観覧車を指差す。" },
                        { time: "17:00", text: "夕陽に染まる街を見下ろしながら、観覧車でゆっくり会話。" },
                        { time: "19:00", text: "ライトアップされた園内で、二人で記念写真を撮りまくる。" },
                        { quote: "「今日のお前/君、世界で一番可愛かった。」" }
                    ]
                },
                {
                    title: "貸切露天風呂の旅♨️",
                    steps: [
                        { time: "13:00", text: "日帰り温泉旅行へ。浴衣に着替えて温泉街をぶらり歩き。" },
                        { time: "15:00", text: "足湯に浸かりながら、「あったかいね」と顔を見合わせる。" },
                        { time: "17:00", text: "個室露天風呂で夕涼み。湯上がりの{name}の色気にドキッとする。" },
                        { quote: "「…顔赤いよ？ のぼせた？ それとも…？」" }
                    ]
                }
            ],
            // 元気・アクティブなデート
            active: [
                {
                    title: "全力エンジョイ遊園地🎠",
                    steps: [
                        { time: "10:00", text: "遊園地のゲート前で集合！「今日は遊び倒すぞ！」と{name}は大はしゃぎ。" },
                        { time: "12:00", text: "絶叫マシーンに乗って大絶叫。怖がるあなたを見て{name}が爆笑。" },
                        { time: "15:00", text: "お揃いのカチューシャを買って自撮りタイム。距離が近くてドキドキ。" },
                        { quote: "「一番の思い出は、アトラクションよりお前/君の笑顔かな。」" }
                    ]
                },
                {
                    title: "ゲームセンターで全力勝負🎮",
                    steps: [
                        { time: "13:00", text: "待ち合わせ場所で{name}と合流すると、もうワクワクした顔でゲームセンターの方向を指さしている。" },
                        { time: "13:30", text: "音ゲーやレースゲームで本気対決。勝った方がドリンクをおごるルールで、二人とも本気モード。" },
                        { time: "15:00", text: "UFOキャッチャーでお互いのために景品を狙う。なかなか取れなくて笑いが止まらない。" },
                        { quote: "「ほら、これお前/君に似合いそうだって思ってさ。取れるまで帰らないから覚悟してね。」" }
                    ]
                },
                {
                    title: "ボウリングでハイタッチ連発🎳",
                    steps: [
                        { time: "11:00", text: "ボウリング場で{name}と合流。シューズを選びながら、どっちがスコア高いか軽く言い合いになる。" },
                        { time: "11:30", text: "ストライクやスペアが出るたびに、自然とハイタッチ。少しずつ距離が縮まっていくのを感じる。" },
                        { time: "13:00", text: "休憩でフードコートへ。スコア表を見ながら「次は絶対勝つ」と笑い合う。" },
                        { quote: "「負けたら罰ゲームね。…お前/君のお願いくらいなら、なんでも聞くけど？」" }
                    ]
                },
                {
                    title: "カラオケで大騒ぎソングパレード🎤",
                    steps: [
                        { time: "16:00", text: "駅前で{name}と合流して、そのままカラオケへ直行。受付でフリータイムを選んでやる気満々。" },
                        { time: "16:30", text: "お互いの十八番を披露し合いながら、合いの手とタンバリンで盛り上がる。" },
                        { time: "18:00", text: "少し疲れてきたところで、しっとりめの曲を入れて、二人だけの空気がゆっくり流れ始める。" },
                        { quote: "「次、お前/君と一緒に歌いたい曲あるんだけど…いい？」" }
                    ]
                },
                {
                    title: "アクティブな公園ピクニック🏃‍♀️",
                    steps: [
                        { time: "10:30", text: "大きな公園の入口で{name}と合流。レジャーシートと軽いお菓子を持って、芝生エリアへ向かう。" },
                        { time: "11:00", text: "バドミントンやフリスビーで体を動かして、息が上がるまで笑いながら走り回る。" },
                        { time: "12:30", text: "少し汗をかいたあと、日陰にシートを敷いて二人でごろん。青空を見上げながら、たわいない話で盛り上がる。" },
                        { quote: "「なんかさ、お前/君といると時間経つの一瞬だね。もうちょいだけ、このまま遊んでていい？」" }
                    ]
                },
                {
                    title: "アスレチック全力チャレンジ🔥",
                    steps: [
                        { time: "10:00", text: "森林アスレチックで{name}と集合。最初からテンション高めでなんか可愛い。" },
                        { time: "11:00", text: "丸太渡りやロープ登りで本気になって汗だく。二人で励まし合いながらクリア！" },
                        { time: "12:30", text: "芝生エリアで休憩。スポーツドリンクを分け合ってゴクゴク。" },
                        { quote: "「次の難関も、一緒に行こっ！」" }
                    ]
                },
                {
                    title: "ボウリングで勝負デート🎳🔥",
                    steps: [
                        { time: "13:00", text: "ボウリング場で{name}と待ち合わせ。勝つ気満々の表情が頼もしい。" },
                        { time: "14:00", text: "ストライクが出るたびハイタッチ！指導してもらう時の距離感が近くてドキドキ。" },
                        { time: "15:00", text: "結果は接戦。笑いながらスコアを見比べる。" },
                        { quote: "「もう1ゲームやろ？君とだと時間忘れちゃう。」" }
                    ]
                },
                {
                    title: "自転車で川沿いツーリング🚲🌈",
                    steps: [
                        { time: "10:00", text: "レンタサイクルで{name}と合流。風が気持ち良い朝。" },
                        { time: "11:00", text: "川沿いの道を並んで走る。息が弾むのもなんか楽しい。" },
                        { time: "12:00", text: "橋の下で小休憩。お互いの写真を撮り合って笑ってしまう。" },
                        { quote: "「ねぇ、次はどこ走る？まだ終わりたくない。」" }
                    ]
                },
                {
                    title: "白熱！カラオケデート🎤",
                    steps: [
                        { time: "13:00", text: "フリータイムで入室！まずは{name}が流行りの曲で盛り上げる。" },
                        { time: "15:00", text: "まさかのラブソングを、目を見て歌われて心臓が止まりそうになる。" },
                        { time: "17:00", text: "喉が枯れるまで歌って、「また来ようね」とハイタッチ。" },
                        { quote: "「…今の曲の歌詞、俺/私の本音だから。気づいた？」" }
                    ]
                },
                {
                    title: "バッティング＆スポッチャ⚾",
                    steps: [
                        { time: "11:00", text: "スポッチャ集合。動きやすい服の{name}が新鮮でかっこいい/可愛い。" },
                        { time: "13:00", text: "バッティングで空振りしたあなたに、後ろから手取り足取り教えてくれる。" },
                        { time: "16:00", text: "ゲームコーナーで対決！負けた方がジュースを奢ることに。" },
                        { quote: "「手、貸して？…ほら、こうやって持つと上手くいくよ。」" }
                    ]
                },
                {
                    title: "夏フェス・野外ライブ🎸",
                    steps: [
                        { time: "10:00", text: "お揃いのフェスTシャツを着て参戦！タオルを回して大盛りあがり。" },
                        { time: "13:00", text: "屋台のフェス飯をシェア。「これ一口ちょーだい」と自然な間接キス。" },
                        { time: "19:00", text: "ラストの曲で花火が上がる中、{name}がそっと手を握ってくる。" },
                        { quote: "「最高だね！…隣にいるのがお前/君で本当によかった。」" }
                    ]
                },
                {
                    title: "ボウリング対決🎳",
                    steps: [
                        { time: "14:00", text: "ボウリング場へ。「ストライク取ったら言うこと聞いて？」と勝負。" },
                        { time: "14:30", text: "ガーターを出して落ち込むあなたを、{name}が頭ポンポンして励ます。" },
                        { time: "16:00", text: "結局負けちゃったけど、罰ゲームのアイスを奢ってくれた。" },
                        { quote: "「次は負けないからな！…また一緒に来てくれる？」" }
                    ]
                },
                {
                    title: "カラオケ爆笑デート🎤😆",
                    steps: [
                        { time: "12:00", text: "カラオケ店前で{name}と集合。やる気満々でマイクを持って登場。" },
                        { time: "13:00", text: "二人でハモりながら歌って大盛り上がり。途中で変な声真似大会が始まる。" },
                        { time: "14:00", text: "ドリンクバーで小休憩。どの曲が一番楽しかったか語り合う。" },
                        { quote: "「次はデュエットしよ？君となら絶対楽しいから！」" }
                    ]
                },
                {
                    title: "テーマパークわちゃわちゃデート🎢🎠",
                    steps: [
                        { time: "10:00", text: "テーマパークで{name}と合流。地図見ながら今日のルートを相談。" },
                        { time: "11:30", text: "絶叫系に挑戦して、降りたあと二人で爆笑。" },
                        { time: "13:00", text: "キャラクターの帽子を被せ合って写真撮影。" },
                        { quote: "「楽しいの、全部君と分けたいんだよね。」" }
                    ]
                },
                {
                    title: "プリクラ撮りまくりデート📸💞",
                    steps: [
                        { time: "15:00", text: "ゲームセンターで{name}と集合。今日のテーマは『可愛く盛る』。" },
                        { time: "15:30", text: "ポーズを相談しながら撮影して、変顔ショットがなぜかいちばん盛れる。" },
                        { time: "16:00", text: "シールを切り分けながらキャッキャする。" },
                        { quote: "「ねぇ、この写真…宝物にしていい？」" }
                    ]
                },
                {
                    title: "テーマパーク全力疾走デート🎢",
                    steps: [
                        { time: "09:00", text: "開園と同時にダッシュで合流！{name}が「今日は全部制覇する！」と宣言。" },
                        { time: "10:00", text: "絶叫マシン連チャンで、二人で叫びまくり。" },
                        { time: "15:00", text: "パレード見て一緒に踊っちゃう。{name}のノリが最高すぎる。" },
                        { quote: "「疲れた？俺/私がおんぶするから、最後まで付き合ってよ〜！」" }
                    ]
                },
                {
                    title: "街中冒険ゲームデート🗺️",
                    steps: [
                        { time: "11:00", text: "謎解き街歩きスタート！{name}がリーダー気取りで先導。" },
                        { time: "13:00", text: "ヒント見つけてハイタッチ連発。めっちゃ盛り上がる。" },
                        { time: "16:00", text: "ゴールで「やったー！」って抱きついてくる{name}が可愛すぎる。" },
                        { quote: "「次はもっと難しいやつ行こう！絶対また一緒に！」" }
                    ]
                },
                {
                    title: "スポーツ観戦＆応援デート⚾",
                    steps: [
                        { time: "12:00", text: "スタジアムで合流。{name}が手作り応援グッズ持参してて感動。" },
                        { time: "13:00", text: "一緒に大声で応援！ホームランで飛び跳ねて抱き合う。" },
                        { time: "17:00", text: "勝利の余韻で、二人でハイタッチしまくり。" },
                        { quote: "「今日の勝利、俺/私とお前/君の応援のおかげだよね？」" }
                    ]
                },
                {
                    title: "冬のスノボ/スキーデート⛄",
                    steps: [
                        { time: "09:00", text: "白銀のゲレンデへ。ウェア姿の{name}が3割増しでかっこよく見える。" },
                        { time: "11:00", text: "転びそうになったところを、ガシッと抱きとめて助けてくれる。" },
                        { time: "15:00", text: "リフトの上で二人きり。「寒い？」と自分の手袋で手を温めてくれた。" },
                        { quote: "「寒くないように、もっとこっちおいで。」" }
                    ]
                }
            ],
            // まったり・癒やしデート
            chill: [
                {
                    title: "おうちでまったり映画🎬",
                    steps: [
                        { time: "13:00", text: "今日は{name}のおうちでデート。お菓子とジュースを買い込んで集合。" },
                        { time: "14:00", text: "ソファで肩を寄せ合って映画鑑賞。感動シーンで二人して涙。" },
                        { time: "17:00", text: "夕飯の買い出しにスーパーへ。「新婚さんみたい」とからかわれる。" },
                        { quote: "「…ねえ、このまま時間止まればいいのにね。」" }
                    ]
                },
                {
                    title: "お菓子作りおうちデート🧁",
                    steps: [
                        { time: "14:00", text: "{name}の家におじゃますると、すでに材料がテーブルに並べられていて気合い十分な様子。" },
                        { time: "14:30", text: "一緒に生地を混ぜたりトッピングを乗せたり、キッチンで肩が触れ合う距離で作業する。" },
                        { time: "16:00", text: "焼き上がったお菓子を紅茶と一緒に味見。思ったより上手くできて、二人で顔を見合わせて笑う。" },
                        { quote: "「またさ、お前/君と作りたいな。今日のレシピ、ちゃんとメモっとこ。」" }
                    ]
                },
                {
                    title: "お家でまったり動画鑑賞📺",
                    steps: [
                        { time: "13:00", text: "{name}の部屋に招かれて、ソファに並んで座る。おすすめの動画リストを見せてもらいながら、何を見るか相談。" },
                        { time: "13:30", text: "ブランケットを分け合いながら、面白いシーンで同時に笑ったり、感動シーンで静かになったり、同じ感情を共有する。" },
                        { time: "16:00", text: "見終わったあと、余韻のまま感想会。気付いたらソファで寄りかかるような体勢になっている。" },
                        { quote: "「次に観たいやつ、もう決めといてよ。またお前/君と一緒に観るから。」" }
                    ]
                },
                {
                    title: "ゆったりカフェはしご☕",
                    steps: [
                        { time: "11:30", text: "待ち合わせ場所で{name}と合流し、前から気になっていたカフェへ向かう。" },
                        { time: "12:00", text: "落ち着いた店内でランチを楽しみながら、最近あったことをゆっくり話す。" },
                        { time: "14:00", text: "次のカフェではスイーツとラテアートを注文。写真を撮り合いながら、隣同士でのんびり過ごす。" },
                        { quote: "「こういう静かな時間をお前/君と共有できるの、ちょっと贅沢だよね。」" }
                    ]
                },
                {
                    title: "本屋さんと読書タイム📚",
                    steps: [
                        { time: "15:00", text: "大きな本屋さんで{name}と合流。本の匂いと静かな空気に、自然と声が小さくなる。" },
                        { time: "15:30", text: "お互いおすすめの本を探して、「これ好きそう」と選んだ一冊を手渡し合う。" },
                        { time: "16:30", text: "近くのベンチに座って、買った本を少しだけ一緒に読む。たまに目が合って、くすっと笑い合う。" },
                        { quote: "「読み終わったらさ、感想ちゃんと聞かせてよ。お前/君の言葉で聞きたい。」" }
                    ]
                },
                {
                    title: "まったりお家デート🛋️",
                    steps: [
                        { time: "14:00", text: "{name}の部屋に遊びに行く。手作りお菓子が待ってた。" },
                        { time: "15:00", text: "ソファでくっついて映画マラソン。途中で寝落ちする{name}が可愛い。" },
                        { time: "18:00", text: "一緒に夕飯作って、まったり食べて、まったりおしゃべり。" },
                        { quote: "「こんな何気ない時間が、俺/私一番幸せだわ。」" }
                    ]
                },
                {
                    title: "癒し系カフェ巡りデート☕",
                    steps: [
                        { time: "13:00", text: "隠れ家カフェで待ち合わせ。{name}が「ここ知ってる？」って得意げ。" },
                        { time: "14:00", text: "スイーツ食べながら、最近の悩みとか全部話す。" },
                        { time: "17:00", text: "夕方のカフェでぼーっと外を眺めて、静かな幸せを噛みしめる。" },
                        { quote: "「君といると、時間がゆっくり流れるね。」" }
                    ]
                },
                {
                    title: "図書館＆本屋デート📚",
                    steps: [
                        { time: "12:00", text: "図書館で待ち合わせ。{name}がおススメの本を山ほど持ってきてくれた。" },
                        { time: "14:00", text: "隣で黙って読書。でも時々目が合ってニヤニヤ。" },
                        { time: "16:00", text: "本屋に移動して、一緒に選んだ本をお互いにプレゼント。" },
                        { quote: "「この本、君と一緒に読みたいな。」" }
                    ]
                },
                {
                    title: "青空ピクニックデート🥪",
                    steps: [
                        { time: "11:00", text: "天気のいい公園に集合。{name}がレジャーシートを持ってきてくれた。" },
                        { time: "12:00", text: "手作りのお弁当を広げる。「これ美味い！」と{name}も大喜び。" },
                        { time: "14:00", text: "芝生に寝転がって、流れる雲を見ながら将来の話をする。" },
                        { quote: "「なんか幸せだなあ。…お前/君といると、すごく落ち着く。」" }
                    ]
                },
                {
                    title: "図書館＆本屋さん巡り📚",
                    steps: [
                        { time: "14:00", text: "静かな図書館で待ち合わせ。お互いのおすすめの本を探し合う。" },
                        { time: "15:00", text: "隣同士で読書タイム。ふと視線を感じて見ると{name}と目が合う。" },
                        { time: "17:00", text: "カフェで読んだ本の感想会。知的な一面に改めて惚れ直す。" },
                        { quote: "「今度は俺/私がおすすめした本、読んでみてよ。絶対好きだと思う。」" }
                    ]
                },
                {
                    title: "癒やしの猫カフェデート🐈",
                    steps: [
                        { time: "13:00", text: "猫カフェへ。「どっちが猫に好かれるか勝負！」と意気込む。" },
                        { time: "13:30", text: "{name}が猫じゃらしで遊ぶ姿が、猫より可愛くて悶える。" },
                        { time: "15:00", text: "膝の上で寝た猫を撫でながら、小声で秘密の話をする。" },
                        { quote: "「俺/私、猫も好きだけど…お前/君のほうがもっと好きかも。」" }
                    ]
                },
                {
                    title: "美術館でアートデート🎨",
                    steps: [
                        { time: "11:00", text: "話題の展覧会へ。静かな館内を、肩が触れる距離で歩く。" },
                        { time: "12:30", text: "「この絵、なんかお前/君っぽい」と不思議な感想を言われる。" },
                        { time: "14:00", text: "ミュージアムショップでお揃いのポストカードを購入。" },
                        { quote: "「綺麗なものを見た後は、君の顔が見たくなるんだよね。」" }
                    ]
                },
                {
                    title: "おうちで映画鑑賞デート📀🛋",
                    steps: [
                        { time: "13:00", text: "{name}がポップコーンを抱えて到着。「今日は泣けるやつにしよ？」" },
                        { time: "14:00", text: "映画を見ながら自然と距離が縮まって、肩が触れる。" },
                        { time: "16:00", text: "感想を語りながらまったりティータイム。" },
                        { quote: "「こういう普通の時間が、一番好きかも。」" }
                    ]
                },
                {
                    title: "路地裏カフェでのんびり読書デート📚☕️",
                    steps: [
                        { time: "11:00", text: "静かなカフェで{name}と待ち合わせ。本棚のある落ち着いた空間。" },
                        { time: "12:00", text: "好きな本を選んで、隣同士で読書。時々目が合って微笑み合う。" },
                        { time: "13:00", text: "スイーツを分け合いながら感想を語る。" },
                        { quote: "「君と読むと、本まで優しくなる気がする。」" }
                    ]
                },
                {
                    title: "手作りクッキーおうちデート🍪🧡",
                    steps: [
                        { time: "14:00", text: "{name}が材料を買ってきてくれた。「今日は一緒にお菓子作ろ？」" },
                        { time: "15:00", text: "粉まみれになりながら笑い合い、型抜きを楽しむ。" },
                        { time: "16:00", text: "焼きたてを味見してほっこり。" },
                        { quote: "「次は何作る？君とならなんでも美味しくなる気がする。」" }
                    ]
                },
                {
                    title: "お家で一緒に料理デート🍳",
                    steps: [
                        { time: "16:00", text: "エプロン姿の{name}とキッチンへ。「味見して？」とスプーンを差し出される。" },
                        { time: "17:00", text: "野菜の切り方で揉めたり笑ったりしながら、なんとか完成。" },
                        { time: "18:00", text: "二人で作った料理で乾杯。「世界一うまい！」と最高の笑顔。" },
                        { quote: "「毎日こうやって、お前/君とご飯食べられたらいいのにな。」" }
                    ]
                }
            ],
            // お買い物・お出かけデート
            shopping: [
                {
                    title: "古着屋＆カフェ巡り☕",
                    steps: [
                        { time: "11:00", text: "おしゃれな街で待ち合わせ。「その服いいね」と褒められる。" },
                        { time: "13:00", text: "古着屋さん巡り。お互いに似合う服を選んで試着大会。" },
                        { time: "16:00", text: "歩き疲れてカフェへ。シェアしたケーキのクリームが口に付いて笑われる。" },
                        { quote: "「俺/私の好みの服、わかってきた？…すっごく似合ってるよ。」" }
                    ]
                },
                {
                    title: "商店街で食べ歩きツアー🍢",
                    steps: [
                        { time: "12:00", text: "にぎやかな商店街で{name}と合流。最初に何を食べるか、看板を見ながら相談する時点でもう楽しい。" },
                        { time: "12:30", text: "コロッケ、たい焼き、唐揚げ…気になるものを半分こしながら、少しずつシェアして歩く。" },
                        { time: "14:00", text: "食べ疲れたらベンチで一休み。買ったドリンクを飲みながら、次に行きたいお店のプランを練る。" },
                        { quote: "「お前/君と一緒だと、何食べても美味しく感じるの反則じゃない？」" }
                    ]
                },
                {
                    title: "ショッピングモールでおそろい探し🛍️",
                    steps: [
                        { time: "13:00", text: "ショッピングモールの入口で{name}と合流。フロアマップを見ながら、まずどこに行くか相談する。" },
                        { time: "13:30", text: "雑貨屋でおそろいになりそうな小物を物色。キーホルダーやアクセサリーを手に取りながら、似合うかどうか真剣に考える。" },
                        { time: "15:00", text: "フードコートで一息つきつつ、買ったものを見せ合う。袋から出して、嬉しそうに眺める表情が愛おしい。" },
                        { quote: "「これ見るたびにさ、今日のこと思い出してよ。…約束。」" }
                    ]
                },
                {
                    title: "デパ地下グルメ発掘デート🍰",
                    steps: [
                        { time: "16:00", text: "駅ビルのデパ地下で{name}と合流。色とりどりのお惣菜やスイーツに、目移りが止まらない。" },
                        { time: "16:30", text: "気になるものを少しずつテイクアウト用に購入。「これ半分こしよう」と相談しながら選ぶ時間も楽しい。" },
                        { time: "18:00", text: "近くのベンチやお家で、買ってきたものを並べて即席ビュッフェ。どれが一番好きかランキングをつけながら味わう。" },
                        { quote: "「次来たときはさ、お前/君の一番好きだったやつ、真っ先に買いに行こ。」" }
                    ]
                },
                {
                    title: "古着屋さんめぐりとカフェ休憩👚",
                    steps: [
                        { time: "11:00", text: "駅近くの古着街で{name}と合流。今日のテーマカラーを決めて、似合いそうな服を探しに行く。" },
                        { time: "11:30", text: "お互いに「これ着たら絶対かわいい/かっこいい」と思った服を選んで、試着室から出てくるのをドキドキしながら待つ。" },
                        { time: "13:00", text: "少し歩き疲れたところで、近くのカフェへ。購入したアイテムを見せ合いながら、次に一緒に行きたいお店の話をする。" },
                        { quote: "「今度その服着てさ、またお前/君とデートしたい。」" }
                    ]
                },
                {
                    title: "IKEAで妄想デート🪑",
                    steps: [
                        { time: "13:00", text: "大型家具店へ。「将来こんな部屋に住みたいね」とソファに座る。" },
                        { time: "15:00", text: "キッチンコーナーで「朝ごはんはパン派？」なんて新婚ごっこ。" },
                        { time: "17:00", text: "出口で50円ソフトクリームを食べて、「また来よう」と約束。" },
                        { quote: "「いつか本当に、二人で家具選びに来れたらいいね。」" }
                    ]
                },
                {
                    title: "ショッピングモールでまったりデート🛍💗",
                    steps: [
                        { time: "12:00", text: "モールで{name}と合流。服を選び合って盛り上がる。" },
                        { time: "13:00", text: "休憩しながらタピオカを飲んでほっと一息。" },
                        { time: "14:00", text: "雑貨屋でお揃いのキーホルダーを発見してテンションUP。" },
                        { quote: "「これ見てると、君のこと思い出すんだろうな。」" }
                    ]
                },
                {
                    title: "商店街で食べ歩きデート🍡🍞",
                    steps: [
                        { time: "11:00", text: "商店街で{name}と合流。まずはコロッケを半分こ。" },
                        { time: "12:00", text: "たい焼きや唐揚げなどを食べ歩きながら、お店を巡る。" },
                        { time: "13:00", text: "レトロなお店でプリンを発見して即入店。" },
                        { quote: "「お腹いっぱいでも、君とならまだ食べられるよ。」" }
                    ]
                },
                {
                    title: "本屋＆文房具屋さん巡り📚🖊",
                    steps: [
                        { time: "15:00", text: "大型書店で{name}と集合。新刊コーナーを見てワクワク。" },
                        { time: "16:00", text: "文房具屋さんで可愛いシールやノートを見てテンション上がる。" },
                        { time: "17:00", text: "ベンチで買った本を見比べながら、夕日をゆっくり眺める。" },
                        { quote: "「今日選んだ本、読んだら感想聞かせてね。」" }
                    ]
                },
                {
                    title: "夏祭り＆食べ歩き🍧",
                    steps: [
                        { time: "17:00", text: "神社の夏祭りへ。浴衣姿の{name}にドキッとして言葉が出ない。" },
                        { time: "18:00", text: "たこ焼きとかき氷を半分こ。「あーん」されて周りの視線が痛いけど幸せ。" },
                        { time: "20:00", text: "人混みではぐれないように、小指だけそっと繋いで花火を見る。" },
                        { quote: "「来年も、再来年も、隣で花火見たいな。…いい？」" }
                    ]
                },
                {
                    title: "アウトレット爆買いデート🛍️",
                    steps: [
                        { time: "10:00", text: "バスに乗ってアウトレットへ。「似合うかな？」とファッションショー。" },
                        { time: "12:00", text: "フードコートでランチ。買いすぎた荷物を{name}が全部持ってくれる。" },
                        { time: "15:00", text: "歩き疲れてベンチで休憩。買ったばかりの靴をすぐ履き替えて笑う。" },
                        { quote: "「お前/君へのプレゼント選ぶのが、一番楽しかったかも。」" }
                    ]
                },
                {
                    title: "デパ地下スイーツ巡り🍰",
                    steps: [
                        { time: "11:00", text: "デパ地下へ突撃！ショーケースに並ぶケーキに目を輝かせる二人。" },
                        { time: "12:00", text: "限定スイーツを求めて行列に並ぶ。待ち時間のおしゃべりも楽しい。" },
                        { time: "14:00", text: "屋上のベンチで戦利品を実食。「一口ちょうだい！」の攻防戦。" },
                        { quote: "「甘いもの食べてる時の顔、ほんと幸せそうだよね。…好きだなあ。」" }
                    ]
                },
                {
                    title: "お揃い探しショッピングデート🛍️",
                    steps: [
                        { time: "11:00", text: "駅前で合流。{name}が「お揃い買おう！」って目をキラキラさせてる。" },
                        { time: "12:00", text: "服屋で「これ似合う？」って試着見せ合いしまくり。" },
                        { time: "15:00", text: "お揃いのアクセサリーゲットして、すぐつけて記念撮影。" },
                        { quote: "「これで、どこにいても繋がってる感じするね。」" }
                    ]
                },
                {
                    title: "食べ歩き＆スイーツデート🍡",
                    steps: [
                        { time: "12:00", text: "商店街で待ち合わせ。{name}が地図アプリ片手に「次はあそこ！」" },
                        { time: "13:00", text: "たこ焼き半分こ、クレープ半分こ、たい焼き半分こ…" },
                        { time: "16:00", text: "最後は有名パフェ屋さんで、二人でスプーンで奪い合い。" },
                        { quote: "「あーんして？」って{name}に言われて、心臓バクバク。" }
                    ]
                },
                {
                    title: "雑貨屋巡り＆癒しデート🎀",
                    steps: [
                        { time: "13:00", text: "可愛い雑貨屋街で合流。{name}が「これ絶対買う！」って興奮。" },
                        { time: "14:00", text: "文房具、香りもの、ぬいぐるみ…全部可愛すぎて困る。" },
                        { time: "17:00", text: "最後はお互いにサプライズプレゼント交換。" },
                        { quote: "「君が選んでくれたもの、毎日使うね。」" }
                    ]
                },
                {
                    title: "オタクの聖地巡礼デート🤓",
                    steps: [
                        { time: "11:00", text: "アニメショップへ。「これ欲しかったやつ！」と{name}が大興奮。" },
                        { time: "13:00", text: "コラボカフェで推しメニューを注文。ランダムコースターを開封の儀。" },
                        { time: "16:00", text: "ゲームセンターでクレーンゲーム。取れるまで諦めない{name}を応援。" },
                        { quote: "「俺/私の好きなもの、一緒に楽しんでくれてありがとう！」" }
                    ]
                }
            ]
        };

        // プラン生成機能
        function generatePlan() {
            const name = document.getElementById('input-name').value || "推し";
            const vibe = document.getElementById('input-vibe').value;
            
            // カテゴリのキーを取得
            let categoryKey = vibe;
            if (vibe === 'random') {
                const keys = Object.keys(scenarios);
                categoryKey = keys[Math.floor(Math.random() * keys.length)];
            }

            // そのカテゴリの中からランダムに1つのプランを選ぶ
            const planList = scenarios[categoryKey];
            const plan = planList[Math.floor(Math.random() * planList.length)];

            // 画面への反映
            document.getElementById('card-name').innerText = name;
            document.getElementById('card-title').innerText = plan.title; // タイトルもデータから取得

            // リストの生成
            const listEl = document.getElementById('schedule-list');
            listEl.innerHTML = ''; // リセット

            // stepsをループ
            plan.steps.forEach(step => {
                if(step.time) { // 時間がある通常のステップ
                    const li = document.createElement('li');
                    li.className = 'schedule-item';
                    const text = step.text.replace(/{name}/g, name);
                    
                    li.innerHTML = `
                        <span class="time">${step.time}</span>
                        <span class="action">${text}</span>
                    `;
                    listEl.appendChild(li);
                } else if(step.quote) { // 最後のセリフ（データ構造的に分けたほうが綺麗だけど今回はstepsの最後に入ってる場合もあるので対応）
                     // 今回のデータ構造ではquoteはstepsの外に出したのでここは通らない想定だけど念のため
                }
            });

            // 最後のセリフ（stepsの最後の要素にあるquoteを使う）
            const lastStep = plan.steps[plan.steps.length - 1];
            if(lastStep.quote) {
                 const quoteText = lastStep.quote.replace(/{name}/g, name);
                 document.getElementById('card-quote').innerText = quoteText;
            }
        }

        // --- 保存・共有機能 ---
        document.getElementById('btn-save').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> 生成中...';
            btn.disabled = true;

            html2canvas(document.getElementById('date-card'), {
                scale: 3, 
                backgroundColor: null,
                useCORS: true
            }).then(canvas => {
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                if (!isMobile) {
                    const link = document.createElement('a');
                    link.download = `oshi-date-${Date.now()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } else {
                    const area = document.getElementById('longpressSaveArea');
                    area.style.display = 'block';
                    area.innerHTML = '<p style="color:#5d9bc8;font-weight:bold;margin-bottom:10px;">👇 画像を長押しして「写真に保存」してね♡</p>';
                    const img = new Image();
                    img.src = canvas.toDataURL('image/png');
                    img.style.maxWidth = '100%';
                    img.style.borderRadius = '10px';
                    img.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                    area.appendChild(img);
                    area.scrollIntoView({behavior: 'smooth'});
                }
                btn.innerHTML = originalText;
                btn.disabled = false;
            });
        });

        document.getElementById('btn-share').addEventListener('click', async function() {
            const name = document.getElementById('input-name').value || "推し";
            // 今表示されているタイトルを取得
            const currentTitle = document.getElementById('card-title').innerText;
            const shareData = {
                title: '推しとおでかけプランメーカー',
                text: `${name}との「${currentTitle}」を作ったよ！\n#推しとデートメーカー`,
                url: location.href
            };

            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                } catch (err) {
                    console.log('Cancelled', err);
                }
            } else {
                alert('URLをコピーしました！SNSに貼り付けてね♡');
                navigator.clipboard.writeText(location.href);
            }
        });

        // ページ読み込み時
        window.onload = function() {
            generatePlan();
        };

    </script>
</body>
</html>
