<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ãƒ¡ã‚¿ã‚¿ã‚°ãƒ»OGPè¨­å®š -->
    <title>æ¨ã—ã¨ãŠã§ã‹ã‘ãƒ—ãƒ©ãƒ³ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
    <meta name="description" content="æ¨ã—ã¨ã®ç†æƒ³ã®ãƒ‡ãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ã‚’è‡ªå‹•ç”Ÿæˆâ™¡ã‚ãªãŸã ã‘ã®èƒ¸ã‚­ãƒ¥ãƒ³ãª1æ—¥ã‚’ä½œã‚ã†ï¼">
    
    <meta property="og:title" content="æ¨ã—ã¨ãŠã§ã‹ã‘ãƒ—ãƒ©ãƒ³ãƒ¡ãƒ¼ã‚«ãƒ¼">
    <meta property="og:description" content="æ¨ã—ã¨ã®ç†æƒ³ã®ãƒ‡ãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ã‚’è‡ªå‹•ç”Ÿæˆâ™¡ã‚ãªãŸã ã‘ã®èƒ¸ã‚­ãƒ¥ãƒ³ãª1æ—¥ã‚’ä½œã‚ã†ï¼">
    <meta property="og:type" content="website">
    <!-- â†“ URLã¯è‡ªåˆ†ã®ã‚‚ã®ã«å¤‰ãˆã¦ã­ -->
    <meta property="og:url" content="https://mofu-mitsu.github.io/oshi-date-maker/">
    <!-- â†“ OGPç”»åƒãŒã§ããŸã‚‰ã“ã“ã‚’å¤‰ãˆã¦ã­ -->
    <meta property="og:image" content="https://mofu-mitsu.github.io/oshi-date-maker/ogp.png">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âœˆï¸</text></svg>">

    <!-- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ãƒ•ã‚©ãƒ³ãƒˆï¼šæ‰‹æ›¸ãé¢¨ã€ŒYomogiã€ã‚’ä½¿ç”¨ -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Yomogi&family=Zen+Maru+Gothic:wght@500;700&display=swap');

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #f0f8ff; /* è–„ã„ç©ºè‰² */
            background-image: 
                linear-gradient(90deg, rgba(255,255,255,0.5) 50%, transparent 50%),
                linear-gradient(rgba(255,255,255,0.5) 50%, transparent 50%);
            background-size: 40px 40px; /* æ–¹çœ¼ç´™ã£ã½ã„èƒŒæ™¯ */
            color: #555;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 10px;
            margin: 0;
            overflow-x: hidden;
        }

        h1 {
            color: #5d9bc8;
            font-family: 'Yomogi', cursive;
            font-size: 1.8rem;
            text-align: center;
            margin-bottom: 5px;
            background: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 3px 3px 0 #bae6fd;
            border: 2px solid #5d9bc8;
            transform: rotate(-2deg); /* ã¡ã‚‡ã£ã¨å‚¾ã‘ã¦æ‰‹ä½œã‚Šæ„Ÿ */
        }

        .subtitle {
            font-family: 'Yomogi', cursive;
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 25px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            align-items: flex-start;
            max-width: 900px;
            width: 100%;
        }

        /* --- å…¥åŠ›ã‚¨ãƒªã‚¢ --- */
        .editor {
            flex: 1;
            min-width: 280px;
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 10px solid #a5d8ff; /* ä¸Šéƒ¨ã«ãƒ†ãƒ¼ãƒ—é¢¨ã®è‰² */
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #5d9bc8;
            font-family: 'Yomogi', cursive;
            font-size: 1.1rem;
        }

        input[type="text"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1rem;
            box-sizing: border-box;
            background: #fafafa;
        }
        
        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #a5d8ff;
            background: #fff;
        }

        button.generate-btn {
            width: 100%;
            padding: 15px;
            background: #8ec5fc;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 0 #5d9bc8;
            transition: transform 0.1s;
            margin-top: 10px;
        }
        
        button.generate-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #5d9bc8;
        }

        /* --- çµæœã‚«ãƒ¼ãƒ‰ã‚¨ãƒªã‚¢ï¼ˆã‚¹ã‚¯ãƒ©ãƒƒãƒ—ãƒ–ãƒƒã‚¯é¢¨ï¼‰ --- */
        .preview-area {
            flex: 1;
            min-width: 320px;
            display: flex;
            justify-content: center;
        }

        #date-card {
            width: 320px;
            /* ãƒãƒ¼ãƒˆã®ç´™ã£ã½ã„ãƒ†ã‚¯ã‚¹ãƒãƒ£ */
            background: #fff; 
            background-image: repeating-linear-gradient(#fff 0px, #fff 24px, #e0f2fe 25px);
            padding: 20px 20px 40px; /* ä¸‹ã‚’é•·ã‚ã« */
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            box-sizing: border-box;
            font-family: 'Yomogi', cursive;
            color: #444;
            /* ãƒªãƒ³ã‚°ãƒãƒ¼ãƒˆé¢¨ã®ç©´ */
            border-left: 10px solid #f0f8ff; 
        }

        /* ãƒã‚¹ã‚­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ—è£…é£¾ */
        #date-card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(1deg);
            width: 120px;
            height: 25px;
            background: rgba(255, 200, 220, 0.6); /* ãƒ”ãƒ³ã‚¯ã®ãƒã‚¹ãƒ† */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }

        #date-card::after {
            content: '';
            position: absolute;
            bottom: 10px;
            right: -10px;
            width: 80px;
            height: 20px;
            background: rgba(160, 230, 180, 0.6); /* ç·‘ã®ãƒã‚¹ãƒ† */
            transform: rotate(-15deg);
            z-index: 10;
        }

        .date-header {
            text-align: center;
            margin-top: 10px;
            margin-bottom: 20px;
            border-bottom: 2px dashed #aaa;
            padding-bottom: 10px;
        }

        .oshi-name-display {
            font-size: 1.4rem;
            color: #5d9bc8;
            font-weight: bold;
        }
        
        .plan-title {
            font-size: 1.1rem;
            margin: 10px 0;
            background: #e0f7fa;
            display: inline-block;
            padding: 2px 10px;
            border-radius: 10px;
            transform: rotate(-1deg);
        }

        /* ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªã‚¹ãƒˆ */
        .schedule-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }

        .schedule-item {
            display: flex;
            margin-bottom: 15px;
            align-items: flex-start;
        }

        .time {
            background: #5d9bc8;
            color: white;
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 0.8rem;
            margin-right: 10px;
            white-space: nowrap;
        }

        .action {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        /* æ¨ã—ã®ã‚»ãƒªãƒ• */
        .highlight-box {
            margin-top: 25px;
            background: #fff8e1; /* è–„ã„é»„è‰² */
            padding: 15px;
            border-radius: 10px;
            position: relative;
            border: 2px solid #ffe082;
            transform: rotate(1deg);
        }

        .highlight-box::before {
            content: 'â™¡';
            position: absolute;
            top: -12px;
            right: -5px;
            font-size: 1.5rem;
            color: #ff8ba7;
        }

        .highlight-text {
            color: #d81b60;
            font-weight: bold;
            font-size: 1rem;
        }

        .watermark {
            margin-top: 25px;
            text-align: right;
            font-size: 0.7rem;
            color: #aaa;
        }

        /* --- ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ --- */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            width: 100%;
            justify-content: center;
        }

        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'Zen Maru Gothic', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        #btn-save { background: #ffb7c5; color: white; }
        #btn-share { background: #444; color: white; }

        /* --- ãƒ•ãƒƒã‚¿ãƒ¼ --- */
        .footer-content {
            margin-top: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .backtop a {
            color: #5d9bc8;
            text-decoration: none;
            font-weight: bold;
            font-family: 'Zen Maru Gothic', sans-serif;
            padding: 10px 20px;
            border-radius: 20px;
            background: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        #longpressSaveArea {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        @media (max-width: 600px) {
            .container { flex-direction: column; align-items: center;}
            .editor, .preview-area { width: 100%; max-width: 320px; }
            #date-card { width: 100%; }
        }
    </style>
</head>
<body>

    <h1>âœˆï¸ æ¨ã—ã¨ãŠã§ã‹ã‘ãƒ—ãƒ©ãƒ³ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
    <p class="subtitle">æ¨ã—ã¨ã®ç†æƒ³ã®ãƒ‡ãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ã‚’ææ¡ˆã™ã‚‹ã‚ˆâ™¡</p>

    <div class="container">
        <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="editor">
            <div class="input-group">
                <label>ğŸ“› æ¨ã—ã®åå‰</label>
                <input type="text" id="input-name" placeholder="ä¾‹ï¼šã¿ã‚Šã‚“ã¦ã‚ƒ">
            </div>

            <div class="input-group">
                <label>ğŸ¢ ãƒ‡ãƒ¼ãƒˆã®æ°—åˆ†</label>
                <select id="input-vibe">
                    <option value="random">ãŠã¾ã‹ã›ï¼</option>
                    <option value="romantic">ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ã«â™¡</option>
                    <option value="active">å…ƒæ°—ã«éŠã¶ï¼</option>
                    <option value="chill">ã¾ã£ãŸã‚ŠãŠã†ã¡/ã‚«ãƒ•ã‚§</option>
                    <option value="shopping">ãŠè²·ã„ç‰©ï¼†é£Ÿã¹æ­©ã</option>
                </select>
            </div>

            <button class="generate-btn" onclick="generatePlan()">ğŸ’˜ ãƒ—ãƒ©ãƒ³ã‚’ä½œæˆï¼</button>
            
            <div class="action-buttons">
                <button id="btn-save" class="action-btn"><i class="fa-solid fa-camera"></i> ä¿å­˜</button>
                <button id="btn-share" class="action-btn"><i class="fa-solid fa-share-nodes"></i> å…±æœ‰</button>
            </div>
        </div>

        <!-- çµæœè¡¨ç¤ºï¼ˆæ‰‹å¸³é¢¨ï¼‰ -->
        <div class="preview-area">
            <div id="date-card">
                <div class="date-header">
                    <div style="font-size:0.8rem; color:#888;">DATE PLAN with</div>
                    <div class="oshi-name-display" id="card-name">æ¨ã—ã®åå‰</div>
                </div>

                <div style="text-align:center;">
                    <span class="plan-title" id="card-title">âœ¨ ç†æƒ³ã®ãƒ‡ãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ âœ¨</span>
                </div>

                <ul class="schedule-list" id="schedule-list">
                    <!-- ã“ã“ã«JSã§ãƒ—ãƒ©ãƒ³ãŒç”Ÿæˆã•ã‚Œã¾ã™ -->
                    <li class="schedule-item">
                        <span class="time">10:00</span>
                        <span class="action">ã“ã“ã«ãƒ—ãƒ©ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆï¼<br>åå‰ã‚’å…¥ã‚Œã¦ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­ã€‚</span>
                    </li>
                </ul>

                <div class="highlight-box">
                    <div style="font-size:0.8rem; color:#aaa; margin-bottom:5px;">Today's Highlight</div>
                    <div class="highlight-text" id="card-quote">ã€Œã©ã‚“ãªãƒ‡ãƒ¼ãƒˆã«ãªã‚‹ã‹æ¥½ã—ã¿ã ã­ï¼ã€</div>
                </div>

                <div class="watermark">#æ¨ã—ã¨ãƒ‡ãƒ¼ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼</div>
            </div>
        </div>
    </div>

    <!-- ã‚¹ãƒãƒ›ç”¨é•·æŠ¼ã—ä¿å­˜ã‚¨ãƒªã‚¢ -->
    <div id="longpressSaveArea"></div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <div class="footer-content">
        <!-- æ¥½å¤©ã‚¢ãƒ•ã‚£ -->
        <div class="rakuten">
            <a href="https://hb.afl.rakuten.co.jp/hsc/4e9240a2.33577567.3d95c766.8a7897b5/?link_type=pict&ut=eyJwYWdlIjoic2hvcCIsInR5cGUiOiJwaWN0IiwiY29sIjoxLCJjYXQiOiI4NSIsImJhbiI6NDc4OTczLCJhbXAiOmZhbHNlfQ%3D%3D" target="_blank" rel="nofollow sponsored noopener" style="word-wrap:break-word;">
                <img src="https://hbb.afl.rakuten.co.jp/hsb/4e9240a2.33577567.3d95c766.8a7897b5/?me_id=1&me_adv_id=478973&t=pict" border="0" style="margin:2px; max-width:100%; height:auto; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.05);" alt="" title="">
            </a>
        </div>

        <!-- TOPã¸æˆ»ã‚‹ -->
        <div class="backtop">
            <a href="https://mofu-mitsu.github.io/">
                <i class="fa-solid fa-house"></i> ã‚‚ãµã¿ã¤å·¥æˆ¿ TOPã¸æˆ»ã‚‹
            </a>
        </div>
    </div>

    <script>
        // ãƒ‡ãƒ¼ãƒˆãƒ—ãƒ©ãƒ³ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆ1ã¤ã®ã‚«ãƒ†ã‚´ãƒªã«è¤‡æ•°ã®ãƒ—ãƒ©ãƒ³ã‚’ç”¨æ„ã—ãŸã‚ˆï¼ï¼‰
        const scenarios = {
            romantic: [
                {
                    title: "å¤œæ™¯ã¨ã¨ãã‚ããƒ‡ã‚£ãƒŠãƒ¼ğŸŒƒ",
                    steps: [
                        { time: "17:00", text: "å¾…ã¡åˆã‚ã›å ´æ‰€ã§ã€ã„ã¤ã‚‚ã‚ˆã‚ŠãŠã‚ã‹ã—ã—ãŸ{name}ã¨åˆæµã€‚" },
                        { time: "18:00", text: "å¤œæ™¯ã®è¦‹ãˆã‚‹ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ãƒ‡ã‚£ãƒŠãƒ¼ã€‚ã€Œã“ã‚Œã€ç¾å‘³ã—ã„ã­ã€ã¨å¾®ç¬‘ã¿åˆã†ã€‚" },
                        { time: "20:00", text: "ãã‚‰ãã‚‰å…‰ã‚‹ã‚¤ãƒ«ãƒŸãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ä¸­ã‚’ã€æ‰‹ã‚’ç¹‹ã„ã§æ•£æ­©ã€‚" },
                        { quote: "ã€Œå¸°ã‚ŠãŸããªã„ãªâ€¦ã‚‚ã†å°‘ã—ã ã‘ã€ä¸€ç·’ã«ã„ã¦ãã‚Œã‚‹ï¼Ÿã€" }
                    ]
                },
                {
                    title: "å¹»æƒ³çš„ãªæ°´æ—é¤¨ãƒ‡ãƒ¼ãƒˆğŸ¬",
                    steps: [
                        { time: "13:00", text: "æ°´æ—é¤¨å‰ã§å¾…ã¡åˆã‚ã›ã€‚{name}ã¯ã‚‚ã†ãƒã‚±ãƒƒãƒˆã‚’è²·ã£ã¦å¾…ã£ã¦ã¦ãã‚ŒãŸã€‚" },
                        { time: "14:00", text: "ã‚¯ãƒ©ã‚²ã‚³ãƒ¼ãƒŠãƒ¼ã®è–„æš—ã„ç…§æ˜ã®ä¸­ã€äºŒäººã®è·é›¢ãŒè‡ªç„¶ã¨ç¸®ã¾ã‚‹ã€‚" },
                        { time: "16:00", text: "ã‚¤ãƒ«ã‚«ã‚·ãƒ§ãƒ¼ã§æ°´ã—ã¶ãã‚’æµ´ã³ã¦ã€äºŒäººã§é¡”ã‚’è¦‹åˆã‚ã›ã¦å¤§ç¬‘ã„ã€‚" },
                        { quote: "ã€Œã¯ãã‚Œãªã„ã‚ˆã†ã«ã€ä¿º/ç§ã®è£¾ã€æ´ã‚“ã§ã¦ã„ã„ã‚ˆã€‚ã€" }
                    ]
                },
                {
                    title: "æ˜Ÿç©ºãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ãƒ‡ãƒ¼ãƒˆğŸ’«",
                    steps: [
                        { time: "18:00", text: "ä»•äº‹/å­¦æ ¡å¸°ã‚Šã«å¾…ã¡åˆã‚ã›ã—ã¦ã€ãƒ—ãƒ©ãƒã‚¿ãƒªã‚¦ãƒ ã¸ç›´è¡Œã€‚" },
                        { time: "19:00", text: "æº€å¤©ã®æ˜Ÿç©ºã‚’è¦‹ä¸Šã’ãªãŒã‚‰ã€æš—é—‡ã§ãã£ã¨æ‰‹ãŒè§¦ã‚Œåˆã†ã€‚" },
                        { time: "20:30", text: "æ„Ÿæƒ³ã‚’èªã‚Šåˆã„ãªãŒã‚‰ã€å¤œé¢¨ã«å¹ã‹ã‚Œã¦é§…ã¾ã§æ­©ãã€‚" },
                        { quote: "ã€Œã‚ã®æ˜Ÿã¿ãŸã„ã«ã•ã€ãšã£ã¨éš£ã«ã„ã‚‰ã‚ŒãŸã‚‰ã„ã„ã®ã«ã­ã€‚ã€" }
                    ]
                }
            ],
            active: [
                {
                    title: "å…¨åŠ›ã‚¨ãƒ³ã‚¸ãƒ§ã‚¤éŠåœ’åœ°ğŸ ",
                    steps: [
                        { time: "10:00", text: "éŠåœ’åœ°ã®ã‚²ãƒ¼ãƒˆå‰ã§é›†åˆï¼ã€Œä»Šæ—¥ã¯éŠã³å€’ã™ãï¼ã€ã¨{name}ã¯å¤§ã¯ã—ã‚ƒãã€‚" },
                        { time: "12:00", text: "çµ¶å«ãƒã‚·ãƒ¼ãƒ³ã«ä¹—ã£ã¦å¤§çµ¶å«ã€‚æ€–ãŒã‚‹ã‚ãªãŸã‚’è¦‹ã¦{name}ãŒçˆ†ç¬‘ã€‚" },
                        { time: "15:00", text: "ãŠæƒã„ã®ã‚«ãƒãƒ¥ãƒ¼ã‚·ãƒ£ã‚’è²·ã£ã¦è‡ªæ’®ã‚Šã‚¿ã‚¤ãƒ ã€‚è·é›¢ãŒè¿‘ãã¦ãƒ‰ã‚­ãƒ‰ã‚­ã€‚" },
                        { quote: "ã€Œä¸€ç•ªã®æ€ã„å‡ºã¯ã€ã‚¢ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚ˆã‚ŠãŠå‰/å›ã®ç¬‘é¡”ã‹ãªã€‚ã€" }
                    ]
                },
                {
                    title: "ç™½ç†±ï¼ã‚«ãƒ©ã‚ªã‚±ãƒ‡ãƒ¼ãƒˆğŸ¤",
                    steps: [
                        { time: "13:00", text: "ãƒ•ãƒªãƒ¼ã‚¿ã‚¤ãƒ ã§å…¥å®¤ï¼ã¾ãšã¯{name}ãŒæµè¡Œã‚Šã®æ›²ã§ç››ã‚Šä¸Šã’ã‚‹ã€‚" },
                        { time: "15:00", text: "ã¾ã•ã‹ã®ãƒ©ãƒ–ã‚½ãƒ³ã‚°ã‚’ã€ç›®ã‚’è¦‹ã¦æ­Œã‚ã‚Œã¦å¿ƒè‡“ãŒæ­¢ã¾ã‚Šãã†ã«ãªã‚‹ã€‚" },
                        { time: "17:00", text: "å–‰ãŒæ¯ã‚Œã‚‹ã¾ã§æ­Œã£ã¦ã€ã€Œã¾ãŸæ¥ã‚ˆã†ã­ã€ã¨ãƒã‚¤ã‚¿ãƒƒãƒã€‚" },
                        { quote: "ã€Œâ€¦ä»Šã®æ›²ã®æ­Œè©ã€ä¿º/ç§ã®æœ¬éŸ³ã ã‹ã‚‰ã€‚æ°—ã¥ã„ãŸï¼Ÿã€" }
                    ]
                },
                {
                    title: "ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ï¼†ã‚¹ãƒãƒƒãƒãƒ£âš¾",
                    steps: [
                        { time: "11:00", text: "ã‚¹ãƒãƒƒãƒãƒ£é›†åˆã€‚å‹•ãã‚„ã™ã„æœã®{name}ãŒæ–°é®®ã§ã‹ã£ã“ã„ã„/å¯æ„›ã„ã€‚" },
                        { time: "13:00", text: "ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã§ç©ºæŒ¯ã‚Šã—ãŸã‚ãªãŸã«ã€å¾Œã‚ã‹ã‚‰æ‰‹å–ã‚Šè¶³å–ã‚Šæ•™ãˆã¦ãã‚Œã‚‹ã€‚" },
                        { time: "16:00", text: "ã‚²ãƒ¼ãƒ ã‚³ãƒ¼ãƒŠãƒ¼ã§å¯¾æ±ºï¼è² ã‘ãŸæ–¹ãŒã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’å¥¢ã‚‹ã“ã¨ã«ã€‚" },
                        { quote: "ã€Œæ‰‹ã€è²¸ã—ã¦ï¼Ÿâ€¦ã»ã‚‰ã€ã“ã†ã‚„ã£ã¦æŒã¤ã¨ä¸Šæ‰‹ãã„ãã‚ˆã€‚ã€" }
                    ]
                }
            ],
            chill: [
                {
                    title: "ãŠã†ã¡ã§ã¾ã£ãŸã‚Šæ˜ ç”»ğŸ¬",
                    steps: [
                        { time: "13:00", text: "ä»Šæ—¥ã¯{name}ã®ãŠã†ã¡ã§ãƒ‡ãƒ¼ãƒˆã€‚ãŠè“å­ã¨ã‚¸ãƒ¥ãƒ¼ã‚¹ã‚’è²·ã„è¾¼ã‚“ã§é›†åˆã€‚" },
                        { time: "14:00", text: "ã‚½ãƒ•ã‚¡ã§è‚©ã‚’å¯„ã›åˆã£ã¦æ˜ ç”»é‘‘è³ã€‚æ„Ÿå‹•ã‚·ãƒ¼ãƒ³ã§äºŒäººã—ã¦æ¶™ã€‚" },
                        { time: "17:00", text: "å¤•é£¯ã®è²·ã„å‡ºã—ã«ã‚¹ãƒ¼ãƒ‘ãƒ¼ã¸ã€‚ã€Œæ–°å©šã•ã‚“ã¿ãŸã„ã€ã¨ã‹ã‚‰ã‹ã‚ã‚Œã‚‹ã€‚" },
                        { quote: "ã€Œâ€¦ã­ãˆã€ã“ã®ã¾ã¾æ™‚é–“æ­¢ã¾ã‚Œã°ã„ã„ã®ã«ã­ã€‚ã€" }
                    ]
                },
                {
                    title: "é’ç©ºãƒ”ã‚¯ãƒ‹ãƒƒã‚¯ãƒ‡ãƒ¼ãƒˆğŸ¥ª",
                    steps: [
                        { time: "11:00", text: "å¤©æ°—ã®ã„ã„å…¬åœ’ã«é›†åˆã€‚{name}ãŒãƒ¬ã‚¸ãƒ£ãƒ¼ã‚·ãƒ¼ãƒˆã‚’æŒã£ã¦ãã¦ãã‚ŒãŸã€‚" },
                        { time: "12:00", text: "æ‰‹ä½œã‚Šã®ãŠå¼å½“ã‚’åºƒã’ã‚‹ã€‚ã€Œã“ã‚Œç¾å‘³ã„ï¼ã€ã¨{name}ã‚‚å¤§å–œã³ã€‚" },
                        { time: "14:00", text: "èŠç”Ÿã«å¯è»¢ãŒã£ã¦ã€æµã‚Œã‚‹é›²ã‚’è¦‹ãªãŒã‚‰å°†æ¥ã®è©±ã‚’ã™ã‚‹ã€‚" },
                        { quote: "ã€Œãªã‚“ã‹å¹¸ã›ã ãªã‚ã€‚â€¦ãŠå‰/å›ã¨ã„ã‚‹ã¨ã€ã™ã”ãè½ã¡ç€ãã€‚ã€" }
                    ]
                },
                {
                    title: "å›³æ›¸é¤¨ï¼†æœ¬å±‹ã•ã‚“å·¡ã‚ŠğŸ“š",
                    steps: [
                        { time: "14:00", text: "é™ã‹ãªå›³æ›¸é¤¨ã§å¾…ã¡åˆã‚ã›ã€‚ãŠäº’ã„ã®ãŠã™ã™ã‚ã®æœ¬ã‚’æ¢ã—åˆã†ã€‚" },
                        { time: "15:00", text: "éš£åŒå£«ã§èª­æ›¸ã‚¿ã‚¤ãƒ ã€‚ãµã¨è¦–ç·šã‚’æ„Ÿã˜ã¦è¦‹ã‚‹ã¨{name}ã¨ç›®ãŒåˆã†ã€‚" },
                        { time: "17:00", text: "ã‚«ãƒ•ã‚§ã§èª­ã‚“ã æœ¬ã®æ„Ÿæƒ³ä¼šã€‚çŸ¥çš„ãªä¸€é¢ã«æ”¹ã‚ã¦æƒšã‚Œç›´ã™ã€‚" },
                        { quote: "ã€Œä»Šåº¦ã¯ä¿º/ç§ãŒãŠã™ã™ã‚ã—ãŸæœ¬ã€èª­ã‚“ã§ã¿ã¦ã‚ˆã€‚çµ¶å¯¾å¥½ãã ã¨æ€ã†ã€‚ã€" }
                    ]
                }
            ],
            shopping: [
                {
                    title: "å¤ç€å±‹ï¼†ã‚«ãƒ•ã‚§å·¡ã‚Šâ˜•",
                    steps: [
                        { time: "11:00", text: "ãŠã—ã‚ƒã‚Œãªè¡—ã§å¾…ã¡åˆã‚ã›ã€‚ã€Œãã®æœã„ã„ã­ã€ã¨è¤’ã‚ã‚‰ã‚Œã‚‹ã€‚" },
                        { time: "13:00", text: "å¤ç€å±‹ã•ã‚“å·¡ã‚Šã€‚ãŠäº’ã„ã«ä¼¼åˆã†æœã‚’é¸ã‚“ã§è©¦ç€å¤§ä¼šã€‚" },
                        { time: "16:00", text: "æ­©ãç–²ã‚Œã¦ã‚«ãƒ•ã‚§ã¸ã€‚ã‚·ã‚§ã‚¢ã—ãŸã‚±ãƒ¼ã‚­ã®ã‚¯ãƒªãƒ¼ãƒ ãŒå£ã«ä»˜ã„ã¦ç¬‘ã‚ã‚Œã‚‹ã€‚" },
                        { quote: "ã€Œä¿º/ç§ã®å¥½ã¿ã®æœã€ã‚ã‹ã£ã¦ããŸï¼Ÿâ€¦ã™ã£ã”ãä¼¼åˆã£ã¦ã‚‹ã‚ˆã€‚ã€" }
                    ]
                },
                {
                    title: "IKEAã§å¦„æƒ³ãƒ‡ãƒ¼ãƒˆğŸª‘",
                    steps: [
                        { time: "13:00", text: "å¤§å‹å®¶å…·åº—ã¸ã€‚ã€Œå°†æ¥ã“ã‚“ãªéƒ¨å±‹ã«ä½ã¿ãŸã„ã­ã€ã¨ã‚½ãƒ•ã‚¡ã«åº§ã‚‹ã€‚" },
                        { time: "15:00", text: "ã‚­ãƒƒãƒãƒ³ã‚³ãƒ¼ãƒŠãƒ¼ã§ã€Œæœã”ã¯ã‚“ã¯ãƒ‘ãƒ³æ´¾ï¼Ÿã€ãªã‚“ã¦æ–°å©šã”ã£ã“ã€‚" },
                        { time: "17:00", text: "å‡ºå£ã§50å††ã‚½ãƒ•ãƒˆã‚¯ãƒªãƒ¼ãƒ ã‚’é£Ÿã¹ã¦ã€ã€Œã¾ãŸæ¥ã‚ˆã†ã€ã¨ç´„æŸã€‚" },
                        { quote: "ã€Œã„ã¤ã‹æœ¬å½“ã«ã€äºŒäººã§å®¶å…·é¸ã³ã«æ¥ã‚ŒãŸã‚‰ã„ã„ã­ã€‚ã€" }
                    ]
                },
                {
                    title: "å¤ç¥­ã‚Šï¼†é£Ÿã¹æ­©ãğŸ§",
                    steps: [
                        { time: "17:00", text: "ç¥ç¤¾ã®å¤ç¥­ã‚Šã¸ã€‚æµ´è¡£å§¿ã®{name}ã«ãƒ‰ã‚­ãƒƒã¨ã—ã¦è¨€è‘‰ãŒå‡ºãªã„ã€‚" },
                        { time: "18:00", text: "ãŸã“ç„¼ãã¨ã‹ãæ°·ã‚’åŠåˆ†ã“ã€‚ã€Œã‚ãƒ¼ã‚“ã€ã•ã‚Œã¦å‘¨ã‚Šã®è¦–ç·šãŒç—›ã„ã‘ã©å¹¸ã›ã€‚" },
                        { time: "20:00", text: "äººæ··ã¿ã§ã¯ãã‚Œãªã„ã‚ˆã†ã«ã€å°æŒ‡ã ã‘ãã£ã¨ç¹‹ã„ã§èŠ±ç«ã‚’è¦‹ã‚‹ã€‚" },
                        { quote: "ã€Œæ¥å¹´ã‚‚ã€å†æ¥å¹´ã‚‚ã€éš£ã§èŠ±ç«è¦‹ãŸã„ãªã€‚â€¦ã„ã„ï¼Ÿã€" }
                    ]
                }
            ]
        };

        // ãƒ—ãƒ©ãƒ³ç”Ÿæˆæ©Ÿèƒ½
        function generatePlan() {
            const name = document.getElementById('input-name').value || "æ¨ã—";
            const vibe = document.getElementById('input-vibe').value;
            
            // ã‚«ãƒ†ã‚´ãƒªã®ã‚­ãƒ¼ã‚’å–å¾—
            let categoryKey = vibe;
            if (vibe === 'random') {
                const keys = Object.keys(scenarios);
                categoryKey = keys[Math.floor(Math.random() * keys.length)];
            }

            // ãã®ã‚«ãƒ†ã‚´ãƒªã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤ã®ãƒ—ãƒ©ãƒ³ã‚’é¸ã¶
            const planList = scenarios[categoryKey];
            const plan = planList[Math.floor(Math.random() * planList.length)];

            // ç”»é¢ã¸ã®åæ˜ 
            document.getElementById('card-name').innerText = name;
            document.getElementById('card-title').innerText = plan.title; // ã‚¿ã‚¤ãƒˆãƒ«ã‚‚ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å–å¾—

            // ãƒªã‚¹ãƒˆã®ç”Ÿæˆ
            const listEl = document.getElementById('schedule-list');
            listEl.innerHTML = ''; // ãƒªã‚»ãƒƒãƒˆ

            // stepsã‚’ãƒ«ãƒ¼ãƒ—
            plan.steps.forEach(step => {
                if(step.time) { // æ™‚é–“ãŒã‚ã‚‹é€šå¸¸ã®ã‚¹ãƒ†ãƒƒãƒ—
                    const li = document.createElement('li');
                    li.className = 'schedule-item';
                    const text = step.text.replace(/{name}/g, name);
                    
                    li.innerHTML = `
                        <span class="time">${step.time}</span>
                        <span class="action">${text}</span>
                    `;
                    listEl.appendChild(li);
                } else if(step.quote) { // æœ€å¾Œã®ã‚»ãƒªãƒ•ï¼ˆãƒ‡ãƒ¼ã‚¿æ§‹é€ çš„ã«åˆ†ã‘ãŸã»ã†ãŒç¶ºéº—ã ã‘ã©ä»Šå›ã¯stepsã®æœ€å¾Œã«å…¥ã£ã¦ã‚‹å ´åˆã‚‚ã‚ã‚‹ã®ã§å¯¾å¿œï¼‰
                     // ä»Šå›ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã¯quoteã¯stepsã®å¤–ã«å‡ºã—ãŸã®ã§ã“ã“ã¯é€šã‚‰ãªã„æƒ³å®šã ã‘ã©å¿µã®ãŸã‚
                }
            });

            // æœ€å¾Œã®ã‚»ãƒªãƒ•ï¼ˆstepsã®æœ€å¾Œã®è¦ç´ ã«ã‚ã‚‹quoteã‚’ä½¿ã†ï¼‰
            const lastStep = plan.steps[plan.steps.length - 1];
            if(lastStep.quote) {
                 const quoteText = lastStep.quote.replace(/{name}/g, name);
                 document.getElementById('card-quote').innerText = quoteText;
            }
        }

        // --- ä¿å­˜ãƒ»å…±æœ‰æ©Ÿèƒ½ ---
        document.getElementById('btn-save').addEventListener('click', function() {
            const btn = this;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> ç”Ÿæˆä¸­...';
            btn.disabled = true;

            html2canvas(document.getElementById('date-card'), {
                scale: 3, 
                backgroundColor: null,
                useCORS: true
            }).then(canvas => {
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                if (!isMobile) {
                    const link = document.createElement('a');
                    link.download = `oshi-date-${Date.now()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } else {
                    const area = document.getElementById('longpressSaveArea');
                    area.style.display = 'block';
                    area.innerHTML = '<p style="color:#5d9bc8;font-weight:bold;margin-bottom:10px;">ğŸ‘‡ ç”»åƒã‚’é•·æŠ¼ã—ã—ã¦ã€Œå†™çœŸã«ä¿å­˜ã€ã—ã¦ã­â™¡</p>';
                    const img = new Image();
                    img.src = canvas.toDataURL('image/png');
                    img.style.maxWidth = '100%';
                    img.style.borderRadius = '10px';
                    img.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                    area.appendChild(img);
                    area.scrollIntoView({behavior: 'smooth'});
                }
                btn.innerHTML = originalText;
                btn.disabled = false;
            });
        });

        document.getElementById('btn-share').addEventListener('click', async function() {
            const name = document.getElementById('input-name').value || "æ¨ã—";
            // ä»Šè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã‚’å–å¾—
            const currentTitle = document.getElementById('card-title').innerText;
            const shareData = {
                title: 'æ¨ã—ã¨ãŠã§ã‹ã‘ãƒ—ãƒ©ãƒ³ãƒ¡ãƒ¼ã‚«ãƒ¼',
                text: `${name}ã¨ã®ã€Œ${currentTitle}ã€ã‚’ä½œã£ãŸã‚ˆï¼\n#æ¨ã—ã¨ãƒ‡ãƒ¼ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼`,
                url: location.href
            };

            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                } catch (err) {
                    console.log('Cancelled', err);
                }
            } else {
                alert('URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼SNSã«è²¼ã‚Šä»˜ã‘ã¦ã­â™¡');
                navigator.clipboard.writeText(location.href);
            }
        });

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚
        window.onload = function() {
            generatePlan();
        };

    </script>
</body>
</html>
